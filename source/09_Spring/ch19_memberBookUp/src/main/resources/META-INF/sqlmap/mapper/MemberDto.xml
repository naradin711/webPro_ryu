<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="com.lec.ch19.dao.MemberDao">
    	<resultMap type="MemberDto" id="member">
    		<result property="mid" column="mid"/>
    		<result property="mpw" column="mpw"/>
    		<result property="mname" column="mname"/>
    		<result property="mmail" column="mmail"/>
    		<result property="mpost" column="mpost"/>
    		<result property="maddr" column="maddr"/>  
    	</resultMap>
    	
    	<select id="idConfirm" resultMap="member">
    		<![CDATA[
    			
    			SELECT * FROM member WHERE MID=#{mid}
    		
    		]]>
    	</select>
    	<select id="joinMember" parameterType="MemberDto">
    		<![CDATA[
    			INSERT INTO MEMBER VALUES (#{mid},#{mpw},#{mpw},#{mmail},#{mpost},#{maddr})
    		
    		]]>
    	</select> 
    	<select id="loginMember" resultMap="member">
    		<![CDATA[
    			
    			SELECT * FROM member WHERE MID=#{mid} AND MPW = #{mpw}
    		
    		]]>
    	</select> 
    	<select id="getDetailMember" parameterType="String" resultType="MemberDto">
    		SELECT * FROM member WHERE MID=#{mid}
    	</select>
    	
    	<update id="modifyMember" parameterType="MemberDto">
    		UPDATE member SET MNAME  = #{mname} ,
                     MPW    = #{mpw} ,
                     MMAIL = #{mmail} ,
                     mPost = #{mpost} ,
                     MADDR = #{m}
                     WHERE MID = #{mid}
    	</update>
    
    </mapper>